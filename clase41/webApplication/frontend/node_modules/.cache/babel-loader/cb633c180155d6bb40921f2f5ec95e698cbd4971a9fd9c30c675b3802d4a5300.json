{"ast":null,"code":"var _jsxFileName = \"/Volumes/Datos/Coderhouse/Comision32065Coderhouse/clase41/webApplication/frontend/src/componentes/Noticias.js\";\nimport React from 'react';\nimport Noticia from './Noticia';\nimport axios from 'axios';\nimport './Noticias.css';\nimport generarNoticia from '../generador';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL_NOTICIAS = (process.env.NODE_ENV === 'production' ? '' : 'http://localhost:8080') + '/noticias/';\nclass Noticias extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      noticias: [],\n      idObtenerNoticia: '',\n      pedidas: false\n    };\n  }\n  async componentDidMount() {\n    //this.obtenerNoticias()\n  }\n\n  /* ------------------------------- */\n  /*           GET noticia           */\n  /* ------------------------------- */\n  async obtenerNoticias(_id) {\n    try {\n      let response = await axios(URL_NOTICIAS + (_id ? _id : ''));\n      let {\n        data: noticias\n      } = response;\n      this.setState({\n        noticias: noticias ? noticias : []\n      });\n    } catch (error) {\n      console.error(error);\n      this.setState({\n        noticias: []\n      });\n    }\n    this.setState({\n      pedidas: true,\n      idObtenerNoticia: ''\n    });\n  }\n\n  /* ------------------------------- */\n  /*          POST noticia           */\n  /* ------------------------------- */\n  async incorporarNoticia() {\n    try {\n      let noticia = generarNoticia();\n      let response = await axios.post(URL_NOTICIAS, noticia);\n      let {\n        data: noticiaIncorporada\n      } = response;\n      console.log(noticiaIncorporada);\n      let noticias = [...this.state.noticias];\n      noticias.push(noticiaIncorporada);\n      this.setState({\n        noticias\n      });\n    } catch (error) {\n      console.error('incorporarNoticia', error);\n    }\n  }\n\n  /* ------------------------------- */\n  /*         UPDATE noticia          */\n  /* ------------------------------- */\n  async actualizarComoLeida(_id) {\n    try {\n      let {\n        data: noticia\n      } = await axios.put(URL_NOTICIAS + _id, {\n        vista: true\n      });\n      console.log(noticia);\n      let noticias = [...this.state.noticias];\n      noticias.find(noticia => noticia._id === _id).vista = true;\n      this.setState({\n        noticias\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  /* ------------------------------- */\n  /*         DELETE noticia          */\n  /* ------------------------------- */\n  async borrarNoticia(_id) {\n    try {\n      let {\n        data: noticia\n      } = await axios.delete(URL_NOTICIAS + _id);\n      console.log(noticia);\n      let noticias = [...this.state.noticias];\n      let index = noticias.findIndex(noticia => noticia._id === _id);\n      noticias.splice(index, 1);\n      this.setState({\n        noticias\n      });\n    } catch (error) {\n      console.error('borrarNoticia', error);\n    }\n  }\n  render() {\n    let {\n      noticias,\n      idObtenerNoticia,\n      pedidas\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Noticias\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jumbotron\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Mis Noticias - API REST Full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-info my-3 float-left\",\n            onClick: () => this.obtenerNoticias(idObtenerNoticia),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-file-alt\",\n              children: \" Obtener\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 26\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: idObtenerNoticia,\n            className: \"mt-3 ml-1 form-control w-25 float-left\",\n            onChange: e => this.setState({\n              idObtenerNoticia: e.target.value\n            }),\n            placeholder: \"todas \\xF3 ingrese ID\",\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success my-3 float-right\",\n            onClick: () => this.incorporarNoticia(),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-envelope-open-text\",\n              children: \" Generar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 26\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"clearfix\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), !noticias.length && pedidas && /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"alert alert-danger\",\n            children: \"No hay noticias para mostrar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 29\n          }, this), noticias.map((noticia, index) => {\n            return /*#__PURE__*/_jsxDEV(Noticia, {\n              noticia: noticia,\n              index: index,\n              marcarLeida: _id => this.actualizarComoLeida(_id),\n              borrar: _id => this.borrarNoticia(_id)\n            }, noticia._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 37\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default Noticias;","map":{"version":3,"names":["React","Noticia","axios","generarNoticia","URL_NOTICIAS","process","env","NODE_ENV","Noticias","Component","state","noticias","idObtenerNoticia","pedidas","componentDidMount","obtenerNoticias","_id","response","data","setState","error","console","incorporarNoticia","noticia","post","noticiaIncorporada","log","push","actualizarComoLeida","put","vista","find","borrarNoticia","delete","index","findIndex","splice","render","e","target","value","length","map"],"sources":["/Volumes/Datos/Coderhouse/Comision32065Coderhouse/clase41/webApplication/frontend/src/componentes/Noticias.js"],"sourcesContent":["import React from 'react'\nimport Noticia from './Noticia'\n\nimport axios from 'axios'\n\nimport './Noticias.css'\nimport generarNoticia from '../generador'\n\nconst URL_NOTICIAS = (process.env.NODE_ENV === 'production'? '': 'http://localhost:8080') + '/noticias/'\n\nclass Noticias extends React.Component {\n\n    state = {\n        noticias : [],\n        idObtenerNoticia : '',\n        pedidas : false\n    }\n\n    async componentDidMount() {\n        //this.obtenerNoticias()\n    }\n\n    /* ------------------------------- */\n    /*           GET noticia           */\n    /* ------------------------------- */\n    async obtenerNoticias(_id) {\n        try {\n            let response = await axios(URL_NOTICIAS+(_id?_id:''))\n            let { data:noticias } = response\n            this.setState({noticias: noticias? noticias : []})\n        }\n        catch(error) { \n            console.error(error)\n            this.setState({noticias: []})\n        }\n        this.setState({pedidas : true, idObtenerNoticia: ''})        \n    }\n\n    /* ------------------------------- */\n    /*          POST noticia           */\n    /* ------------------------------- */\n    async incorporarNoticia() {\n        try {\n            let noticia = generarNoticia()\n\n            let response = await axios.post(URL_NOTICIAS, noticia)\n            let { data:noticiaIncorporada } = response\n            console.log(noticiaIncorporada)\n\n            let noticias = [...this.state.noticias]\n            noticias.push(noticiaIncorporada)\n            this.setState({noticias})\n        }\n        catch(error) {\n            console.error('incorporarNoticia',error)\n        }\n    }\n\n    /* ------------------------------- */\n    /*         UPDATE noticia          */\n    /* ------------------------------- */\n    async actualizarComoLeida(_id) {\n        try {\n            let { data: noticia } = await axios.put(URL_NOTICIAS+_id, {vista: true})\n            console.log(noticia)\n            let noticias = [...this.state.noticias]\n            noticias.find(noticia => noticia._id === _id).vista = true\n            this.setState({noticias})\n        }\n        catch(error) {\n            console.error(error)\n        }\n    }\n\n    /* ------------------------------- */\n    /*         DELETE noticia          */\n    /* ------------------------------- */\n    async borrarNoticia(_id) {\n        try {\n            let { data: noticia } = await axios.delete(URL_NOTICIAS+_id)\n            console.log(noticia)\n\n            let noticias = [...this.state.noticias]\n            let index = noticias.findIndex(noticia => noticia._id === _id)\n\n            noticias.splice(index , 1)\n            this.setState({noticias})\n        }\n        catch(error) {\n            console.error('borrarNoticia',error)\n        }\n    }\n\n    render() {\n        let { noticias,idObtenerNoticia,pedidas } = this.state\n        return (\n            <div className=\"Noticias\">\n                <div className=\"container mt-3\">\n                    <div className=\"jumbotron\">\n                        <h1>Mis Noticias - API REST Full</h1>\n                        <hr />\n\n                        {/* ---------------- */}\n                        {/* Obtener noticias */}\n                        {/* ---------------- */}\n                        <button className=\"btn btn-info my-3 float-left\" onClick={ \n                            () => this.obtenerNoticias(idObtenerNoticia)}\n                        ><i className=\"fas fa-file-alt\"> Obtener</i></button>\n\n                        <input value={idObtenerNoticia} className=\"mt-3 ml-1 form-control w-25 float-left\" onChange={\n                            e => this.setState({idObtenerNoticia: e.target.value})\n                        } placeholder=\"todas ó ingrese ID\" type=\"text\" />                        \n\n                        {/* ------------- */}\n                        {/* Crear noticia */}\n                        {/* ------------- */}\n                        <button className=\"btn btn-success my-3 float-right\" onClick={ \n                            () => this.incorporarNoticia()}\n                        ><i className=\"fas fa-envelope-open-text\"> Generar</i></button>\n\n                        <div className=\"clearfix\"/>\n                        \n                        {/* Cartel de no hay noticias */}\n                        {\n                            !noticias.length && pedidas && \n                            <h3 className=\"alert alert-danger\">\n                                No hay noticias para mostrar\n                            </h3>\n                        }\n\n                        {/* Representación de las noticias */}\n                        {\n                            noticias.map( (noticia,index) => {\n                                return (\n                                    <Noticia \n                                        noticia={noticia} \n                                        index={index}\n                                        marcarLeida={ _id => this.actualizarComoLeida(_id) } \n                                        borrar={ _id => this.borrarNoticia(_id) } \n                                        key={noticia._id} \n                                    />\n                                )\n                            })\n                        }\n                    </div>\n                </div>\n            </div>            \n        )\n    }\n\n}\n\nexport default Noticias"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}